register:
  post:
    tags:
      - Auth
    summary: Register new user
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
              - name
              - email
              - password
            properties:
              name:
                type: string
                example: "Emre Ceyhan"
              email:
                type: string
                format: email
                example: "emre@example.com"
              password:
                type: string
                example: "Password123!"
    responses:
      "201":
        description: User registered successfully
        content:
          application/json:
            schema:
              $ref: "../schemas/user.yaml"
      "400":
        description: Validation error

login:
  post:
    tags:
      - Auth
    summary: Login user
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
              - email
              - password
            properties:
              email:
                type: string
                format: email
                example: "emre@example.com"
              password:
                type: string
                example: "Password123!"
    responses:
      "200":
        description: Login successful
        content:
          application/json:
            schema:
              type: object
              properties:
                accessToken:
                  type: string
                  example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
      "401":
        description: Invalid credentials

refresh-token:
  post:
    tags:
      - Auth
    summary: Refresh access token
    responses:
      "200":
        description: New access token generated
        content:
          application/json:
            schema:
              type: object
              properties:
                accessToken:
                  type: string
      "401":
        description: Refresh token invalid or expired

get-oauth-url:
  get:
    tags:
      - Auth
    summary: Get Google OAuth URL
    responses:
      "200":
        description: OAuth URL returned
        content:
          application/json:
            schema:
              type: object
              properties:
                url:
                  type: string
                  example: "https://accounts.google.com/o/oauth2/v2/auth?..."

confirm-oauth:
  post:
    tags:
      - Auth
    summary: Login with Google OAuth
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
              - code
            properties:
              code:
                type: string
                example: "4/0AY0e-g6example"
    responses:
      "200":
        description: Google login successful
        content:
          application/json:
            schema:
              type: object
              properties:
                accessToken:
                  type: string

# üîê PROTECTED ROUTES

logout:
  post:
    tags:
      - Auth
    summary: Logout current user
    security:
      - bearerAuth: []
    responses:
      "204":
        description: Logged out successfully

update-user:
  patch:
    tags:
      - Auth
    summary: Update current user profile
    security:
      - bearerAuth: []
    requestBody:
      required: true
      content:
        multipart/form-data:
          schema:
            type: object
            properties:
              name:
                type: string
              email:
                type: string
                format: email
              theme:
                type: string
                enum: [light, dark, system]
              profilePhotoFile:
                type: string
                format: binary
    responses:
      "200":
        description: User updated
        content:
          application/json:
            schema:
              $ref: "../schemas/user.yaml"

current-profile:
  get:
    tags:
      - Auth
    summary: Get current user profile
    security:
      - bearerAuth: []
    responses:
      "200":
        description: Current user profile
        content:
          application/json:
            schema:
              $ref: "../schemas/user.yaml"

current:
  get:
    tags:
      - Auth
    summary: Get current authenticated user
    security:
      - bearerAuth: []
    responses:
      "200":
        description: Current user
        content:
          application/json:
            schema:
              $ref: "../schemas/user.yaml"

request-reset-email:
  post:
    tags:
      - Auth
    summary: Request password reset email
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
              - email
            properties:
              email:
                type: string
                format: email
                example: "emre@example.com"
    responses:
      "200":
        description: Reset email sent

reset-password:
  post:
    tags:
      - Auth
    summary: Reset password using token
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
              - token
              - password
            properties:
              token:
                type: string
                example: "reset-token-example"
              password:
                type: string
                example: "NewPassword123!"
    responses:
      "200":
        description: Password reset successful

needHelp:
  post:
    tags:
      - Auth
    summary: Send help request
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: "../schemas/needHelp.yaml"
    responses:
      "201":
        description: Help request sent
